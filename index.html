<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=cover">
<title>Remote Desktop</title>
<link rel="stylesheet" href="/styles.css">
</head>
<body>
<canvas id="c"></canvas>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-container">
    <div class="loading-spinner">
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
      <div class="spinner-ring"></div>
    </div>
    <div class="loading-status" id="loadingStatus">Connecting...</div>
    <div class="loading-substatus" id="loadingSubstatus">Initializing WebRTC</div>
    <div class="loading-stages">
      <div class="stage" id="stageIce"><span class="stage-dot"></span><span class="stage-label">ICE Gathering</span></div>
      <div class="stage" id="stageSignal"><span class="stage-dot"></span><span class="stage-label">Signaling</span></div>
      <div class="stage" id="stageConnect"><span class="stage-dot"></span><span class="stage-label">Connecting</span></div>
      <div class="stage" id="stageAuth"><span class="stage-dot"></span><span class="stage-label">Authentication</span></div>
      <div class="stage" id="stageStream"><span class="stage-dot"></span><span class="stage-label">Streaming</span></div>
    </div>
  </div>
</div>

<!-- Authentication Modal -->
<div class="auth-overlay" id="authOverlay">
  <div class="auth-container">
    <div class="auth-icon">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
      </svg>
    </div>
    <h2 class="auth-title">Authentication Required</h2>
    <p class="auth-subtitle">Enter your credentials to connect</p>
    <div class="auth-field">
      <label class="auth-label" for="usernameInput">Username</label>
      <input type="text" id="usernameInput" class="auth-input" maxlength="32" autocomplete="username" placeholder="Enter username" spellcheck="false">
    </div>
    <div class="auth-field">
      <label class="auth-label" for="pinInput">PIN</label>
      <input type="text" id="pinInput" class="auth-input auth-input-pin" maxlength="6" inputmode="numeric" pattern="[0-9]*" autocomplete="off" placeholder="------">
    </div>
    <p class="auth-error" id="authError"></p>
    <button class="auth-btn" id="authSubmit">Connect</button>
    <p class="auth-hint">Contact the host for your credentials</p>
  </div>
</div>

<button class="edge" id="edge"></button>
<div class="bk" id="bk"></div>
<div class="pnl" id="pnl">
  <div class="ph"><span class="pt">Settings</span><button class="px" id="pnlX">Ã—</button></div>
  <div class="pc">
    <div class="sec fss"><div class="sl">Display</div><button class="btn" id="fs"><svg id="fsi" viewBox="0 0 24 24"><path id="fsp"/></svg><span id="fst">Fullscreen</span></button></div>
    <div class="sec"><div class="sl">Audio</div><button class="btn bf" id="aBtn"><svg viewBox="0 0 24 24"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07M19.07 4.93a10 10 0 0 1 0 14.14"/></svg><span id="aTxt">Enable Audio</span></button><div class="fst" id="aSt"><span class="fd"></span><span id="aStT">Click to enable audio playback</span></div></div>
    <div class="sec tch"><div class="sl">Touch Mode</div><div class="fst tc on"><span class="fd"></span><span id="tStT">Slide to move cursor, tap to click, long-press+slide to drag</span></div><div class="tmw"><div class="tml">Input Mode</div><div class="tms"><label class="tmo"><input type="radio" name="tm" value="trackpad" checked><div class="tmr"></div><div class="tmi"><div class="tmt">Trackpad</div><div class="tmd">Slide to move, tap to click, hold+slide to drag</div></div></label><label class="tmo"><input type="radio" name="tm" value="direct"><div class="tmr"></div><div class="tmi"><div class="tmt">Direct Touch</div><div class="tmd">Touch positions cursor directly, tap to click, hold+slide to drag</div></div></label></div></div></div>
    <div class="sec"><div class="sl">Clipboard</div><div class="tog on" id="togClip" tabindex="0"><div class="ti"><div class="tl">Clipboard Sync</div><div class="td">Sync clipboard between host and client</div></div><div class="ts"></div></div><div class="fst on" id="clipSt"><span class="fd"></span><span id="clipStT">Clipboard syncing is active</span></div></div>
    <div class="sec"><div class="sl">Capture</div><div class="sw"><span class="sla">Monitor</span><span class="sld">Select which display to capture from the host.</span><select class="sel" id="monSel"><option value="0">Waiting for host...</option></select></div><div class="sw"><span class="sla">Frame Rate</span><span class="sld">Select capture FPS. Native options match display refresh rates.</span><select class="sel" id="fpsSel"><option value="15">15 FPS</option><option value="30">30 FPS</option><option value="60">60 FPS</option></select></div></div>
    <div class="sec"><div class="sl">Diagnostics</div><div class="tog" id="togS" tabindex="0"><div class="ti"><div class="tl">Performance Overlay</div><div class="td">Display real-time latency and frame statistics</div></div><div class="ts"></div></div><div class="tog" id="togC" tabindex="0"><div class="ti"><div class="tl">Debug Console</div><div class="td">Show application logs and errors</div></div><div class="ts"></div></div></div>
  </div>
</div>
<div class="stats" id="stats"><div id="sc"></div></div>
<div class="con" id="con"><div class="ch"><span class="ct">Console</span><button class="cc" id="conClr">Clear</button></div><div class="co" id="conOut"></div></div>
<script type="module" src="/js/network.js"></script>
</body>
</html>
