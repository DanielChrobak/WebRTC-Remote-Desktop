:root{
  --s0:#0a0a0b;--s1:#111113;--s2:#18181b;--s3:#27272a;
  --bd:rgba(255,255,255,.08);--bh:rgba(255,255,255,.12);
  --t1:#fafafa;--t2:#a1a1aa;--t3:#52525b;
  --ac:#22c55e;--ad:rgba(34,197,94,.12);
  --wn:#f59e0b;--er:#ef4444;--tc:#8b5cf6;
  --r:8px;--e:all .2s cubic-bezier(.4,0,.2,1);
  --sb:env(safe-area-inset-bottom,0px);--st:env(safe-area-inset-top,0px);
  --sl:env(safe-area-inset-left,0px);--sr:env(safe-area-inset-right,0px)
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{height:100dvh;overflow:hidden;overscroll-behavior:none}
body{font-family:system-ui,-apple-system,'Segoe UI',sans-serif;background:var(--s0);color:var(--t1);-webkit-font-smoothing:antialiased;touch-action:none}
#c{position:fixed;inset:0;width:100vw;height:100dvh;background:var(--s0);z-index:1;touch-action:none}

/* Loading Overlay */
.loading-overlay{position:fixed;inset:0;background:var(--s0);z-index:1000;display:flex;align-items:center;justify-content:center;padding:20px;transition:opacity .4s,visibility .4s}
.loading-overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}
.loading-container{display:flex;flex-direction:column;align-items:center;gap:16px;width:100%;max-width:320px;text-align:center}
.loading-spinner{position:relative;width:48px;height:48px;flex-shrink:0}
.spinner-ring{position:absolute;inset:0;border-radius:50%;border:2px solid transparent}
.spinner-ring:nth-child(1){border-top-color:var(--ac);animation:spin 1s linear infinite}
.spinner-ring:nth-child(2){inset:5px;border-right-color:var(--tc);animation:spin 1.4s linear infinite reverse}
.spinner-ring:nth-child(3){inset:10px;border-bottom-color:var(--t3);animation:spin 1.8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-status{font-size:16px;font-weight:600;color:var(--t1)}
.loading-substatus{font-size:12px;color:var(--t3);margin-top:-6px;min-height:16px}
.loading-stages{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}
.stage{display:flex;align-items:center;gap:6px;padding:6px 10px;background:var(--s1);border:1px solid var(--bd);border-radius:6px;transition:var(--e)}
.stage.active{background:var(--s2);border-color:var(--bh)}
.stage.active .stage-dot{background:var(--wn);box-shadow:0 0 6px var(--wn);animation:pulse-dot 1.5s ease-in-out infinite}
.stage.done{background:rgba(34,197,94,.06);border-color:rgba(34,197,94,.15)}
.stage.done .stage-dot{background:var(--ac);box-shadow:0 0 6px var(--ac);animation:none}
.stage.error{background:rgba(239,68,68,.06);border-color:rgba(239,68,68,.15)}
.stage.error .stage-dot{background:var(--er);box-shadow:0 0 6px var(--er);animation:none}
.stage-dot{width:6px;height:6px;border-radius:50%;background:var(--t3);flex-shrink:0;transition:var(--e)}
.stage-label{font-size:11px;font-weight:500;color:var(--t2)}
.stage.done .stage-label{color:var(--ac)}
.stage.active .stage-label{color:var(--t1)}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.85)}}
.loading-overlay.reconnecting .loading-status{color:var(--wn)}
.loading-overlay.reconnecting .spinner-ring:nth-child(1){border-top-color:var(--wn)}

/* Auth Overlay */
.auth-overlay{position:fixed;inset:0;background:var(--s0);z-index:1001;display:flex;align-items:center;justify-content:center;padding:20px;opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s}
.auth-overlay.visible{opacity:1;visibility:visible}
.auth-container{display:flex;flex-direction:column;align-items:center;width:100%;max-width:280px;text-align:center}
.auth-icon{width:40px;height:40px;margin-bottom:12px;color:var(--ac);opacity:.9}
.auth-icon svg{width:100%;height:100%}
.auth-title{font-size:18px;font-weight:600;color:var(--t1);margin-bottom:2px}
.auth-subtitle{font-size:12px;color:var(--t3);margin-bottom:16px}
.auth-field{width:100%;margin-bottom:10px;text-align:left}
.auth-label{display:block;font-size:10px;font-weight:600;color:var(--t2);margin-bottom:4px;text-transform:uppercase;letter-spacing:.05em}
.auth-input{width:100%;padding:10px 12px;background:var(--s1);border:1.5px solid var(--bd);border-radius:var(--r);color:var(--t1);font-size:14px;font-weight:500;transition:var(--e);outline:none}
.auth-input::placeholder{color:var(--t3);font-weight:400}
.auth-input:focus{border-color:var(--ac);box-shadow:0 0 0 3px var(--ad)}
.auth-input.error{border-color:var(--er);animation:shake .4s ease}
.auth-input-pin{text-align:center;letter-spacing:6px;font-size:18px;font-weight:600;font-family:ui-monospace,monospace}
.auth-input-pin::placeholder{letter-spacing:4px;font-size:14px}
@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-6px)}40%,80%{transform:translateX(6px)}}
.auth-error{font-size:11px;color:var(--er);min-height:16px;margin-bottom:6px;text-align:center}
.auth-btn{width:100%;padding:10px 16px;background:var(--ac);border:none;border-radius:var(--r);color:#000;font-size:13px;font-weight:600;cursor:pointer;transition:var(--e)}
.auth-btn:hover{background:#2dd66b;transform:translateY(-1px)}
.auth-btn:active{transform:translateY(0)}
.auth-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}

/* Edge & Panel */
.edge{position:fixed;right:0;top:50%;transform:translateY(-50%);width:3px;height:32px;background:rgba(255,255,255,.05);border-radius:3px 0 0 3px;opacity:0;cursor:pointer;z-index:100;transition:all .3s;border:none}
.edge::before{content:'';position:absolute;inset:-30px -15px -30px -50px}
.edge::after{content:'';position:absolute;top:50%;left:0;transform:translateY(-50%);width:3px;height:10px;background:rgba(255,255,255,.15);border-radius:2px;transition:all .3s}
.edge:hover{opacity:1;width:4px;background:rgba(34,197,94,.1)}
.edge:hover::after{height:16px;background:var(--ac);box-shadow:0 0 10px rgba(34,197,94,.4)}
.edge.on{opacity:0;pointer-events:none}
@media(hover:hover){.edge{opacity:1}}
.bk{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(6px);z-index:200;opacity:0;visibility:hidden;transition:var(--e)}
.bk.on{opacity:1;visibility:visible}
.pnl{position:fixed;right:12px;top:50%;transform:translateY(-50%) translateX(calc(100% + 24px));width:260px;max-width:calc(100vw - 24px);max-height:calc(100vh - 24px);background:var(--s1);border:1px solid var(--bd);border-radius:12px;box-shadow:0 12px 48px rgba(0,0,0,.4);z-index:300;opacity:0;visibility:hidden;transition:all .25s;display:flex;flex-direction:column;overflow:hidden}
.pnl.on{transform:translateY(-50%) translateX(0);opacity:1;visibility:visible}
.ph{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--bd)}
.pt{font-size:14px;font-weight:600}
.px{width:26px;height:26px;display:flex;align-items:center;justify-content:center;background:0;border:none;border-radius:6px;cursor:pointer;color:var(--t3);font-size:18px;transition:var(--e)}
.px:hover{background:var(--s2);color:var(--t1)}
.pc{flex:1;overflow-y:auto;padding:10px 14px}
.pc::-webkit-scrollbar{width:3px}
.pc::-webkit-scrollbar-track{background:transparent}
.pc::-webkit-scrollbar-thumb{background:var(--s3);border-radius:2px}
.sec{margin-bottom:14px}
.sec:last-child{margin-bottom:0}
.sl{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--t3);margin-bottom:8px}
.btn-row{display:flex;gap:8px}
.btn-row .btn{flex:1}
.btn{display:flex;align-items:center;justify-content:center;gap:6px;width:100%;padding:9px 12px;background:var(--s2);border:1px solid var(--bd);border-radius:var(--r);cursor:pointer;color:var(--t1);font-size:12px;font-weight:500;transition:var(--e)}
.btn:hover{background:var(--s3);border-color:var(--bh)}
.btn:active{transform:scale(.98)}
.btn svg{width:14px;height:14px;opacity:.7;fill:none;stroke:currentColor;stroke-width:2}
.bf{overflow:hidden}
.bf.on{background:var(--ad);border-color:var(--ac);color:var(--ac)}
.bf.on svg{opacity:1;color:var(--ac)}
.bf.on:hover{background:rgba(34,197,94,.2)}
.fst{display:flex;align-items:center;gap:6px;margin-top:8px;padding:6px 10px;background:var(--s2);border-radius:6px;font-size:10px;color:var(--t3)}
.fst.on{color:var(--t2)}
.fd{width:5px;height:5px;border-radius:50%;background:var(--t3);flex-shrink:0;transition:var(--e)}
.fst.on .fd{background:var(--ac);box-shadow:0 0 6px var(--ac);animation:p 2s ease-in-out infinite}
.fst.tc{margin-bottom:8px;color:var(--t2)}
.fst.tc .fd{background:var(--tc);box-shadow:0 0 6px var(--tc);animation:p 2s infinite}
@keyframes p{0%,100%{opacity:1}50%{opacity:.4}}
.tch{display:none}
@media(pointer:coarse),(max-width:640px){.tch{display:block}}
.tms{display:flex;gap:6px}
.tmo{display:flex;align-items:center;gap:8px;flex:1;padding:8px 10px;background:var(--s2);border:1px solid var(--bd);border-radius:var(--r);cursor:pointer;transition:var(--e)}
.tmo:hover{background:var(--s3);border-color:var(--bh)}
.tmo:has(input:checked){background:rgba(139,92,246,.1);border-color:var(--tc)}
.tmo input{display:none}
.tmr{width:14px;height:14px;border-radius:50%;border:2px solid var(--t3);flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:var(--e)}
.tmr::after{content:'';width:6px;height:6px;border-radius:50%;transition:var(--e)}
.tmo:has(input:checked) .tmr{border-color:var(--tc)}
.tmo:has(input:checked) .tmr::after{background:var(--tc)}
.tmt{font-size:12px;font-weight:500}
.tog{display:flex;align-items:center;justify-content:space-between;padding:10px;background:var(--s2);border:1px solid var(--bd);border-radius:var(--r);cursor:pointer;transition:var(--e);margin-bottom:6px}
.tog:last-of-type{margin-bottom:0}
.tog:hover{background:var(--s3);border-color:var(--bh)}
.tl{font-size:12px;font-weight:500}
.ts{width:32px;height:18px;background:var(--s3);border-radius:9px;position:relative;transition:var(--e);flex-shrink:0;margin-left:10px}
.ts::after{content:'';position:absolute;top:2px;left:2px;width:14px;height:14px;background:var(--t3);border-radius:50%;transition:all .2s}
.tog.on .ts{background:var(--ac)}
.tog.on .ts::after{transform:translateX(14px);background:#fff}
.sw{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}
.sw:last-child{margin-bottom:0}
.sla{font-size:12px;font-weight:500;flex-shrink:0}
.sel{flex:1;min-width:0;padding:8px 10px;background:var(--s2);border:1px solid var(--bd);border-radius:var(--r);color:var(--t1);font-size:11px;font-weight:500;cursor:pointer;transition:var(--e);appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2352525b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center}
.sel:hover{background-color:var(--s3);border-color:var(--bh)}
.sel:focus{outline:none;border-color:var(--ac);box-shadow:0 0 0 2px var(--ad)}
.sel option{background:var(--s1);color:var(--t1)}

/* Stats Panel */
.stats{position:fixed;top:calc(10px + var(--st));left:calc(10px + var(--sl));z-index:150;background:rgba(10,10,11,.92);border:1px solid var(--bd);border-radius:var(--r);padding:10px;min-width:340px;max-width:calc(100vw - 20px);font:9px ui-monospace,monospace;box-shadow:0 6px 24px rgba(0,0,0,.3);opacity:0;visibility:hidden;transform:translateY(-8px) scale(.98);transition:var(--e);max-height:calc(100vh - 60px);overflow-y:auto}
.stats::-webkit-scrollbar{width:3px}
.stats::-webkit-scrollbar-track{background:transparent}
.stats::-webkit-scrollbar-thumb{background:var(--s3);border-radius:2px}
.stats.on{opacity:1;visibility:visible;transform:translateY(0) scale(1)}
.ss{margin-bottom:8px}
.ss:last-child{margin-bottom:0}
.sst{font-size:8px;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--ac);margin-bottom:3px;padding-bottom:2px;border-bottom:1px solid var(--bd)}
.sr{display:flex;justify-content:space-between;padding:1px 0;color:var(--t2)}
.sr span:first-child{color:var(--t3)}
.sv{font-weight:500;font-variant-numeric:tabular-nums}
.sv.g{color:var(--ac)}.sv.w{color:var(--wn)}.sv.b{color:var(--er)}

/* Console */
.con{position:fixed;bottom:calc(10px + var(--sb));left:calc(10px + var(--sl));z-index:150;background:rgba(10,10,11,.92);border:1px solid var(--bd);border-radius:var(--r);box-shadow:0 6px 24px rgba(0,0,0,.3);width:380px;max-width:calc(100vw - 20px);max-height:26vh;display:flex;flex-direction:column;opacity:0;visibility:hidden;transform:translateY(8px) scale(.98);transition:var(--e);overflow:hidden}
.con.on{opacity:1;visibility:visible;transform:translateY(0) scale(1)}
.ch{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;border-bottom:1px solid var(--bd);flex-shrink:0}
.ct{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:.05em;color:var(--t3)}
.cc{font-size:9px;font-weight:600;color:var(--t3);background:var(--s2);border:1px solid var(--bd);padding:2px 6px;border-radius:4px;cursor:pointer;transition:var(--e)}
.cc:hover{background:var(--s3);color:var(--t2)}
.co{flex:1;overflow-y:auto;padding:6px 10px;font:9px ui-monospace,monospace;line-height:1.4}
.co::-webkit-scrollbar{width:3px}
.co::-webkit-scrollbar-track{background:transparent}
.co::-webkit-scrollbar-thumb{background:var(--s3);border-radius:2px}
.le{padding:1px 0;display:flex;gap:6px;border-bottom:1px solid rgba(255,255,255,.02)}
.le:last-child{border-bottom:none}
.lt{color:var(--t3);flex-shrink:0;font-size:8px}
.lm{word-break:break-word}
.le.log .lm{color:var(--t2)}
.le.info .lm{color:var(--ac)}
.le.warn .lm{color:var(--wn)}
.le.error .lm{color:var(--er)}

/* Mobile */
@media(max-width:640px){
  .pnl{right:8px;left:8px;top:auto;bottom:8px;width:auto;transform:translateY(calc(100% + 24px));max-height:55vh;border-radius:10px}
  .pnl.on{transform:translateY(0)}
  .ph{padding:10px 12px}
  .pt{font-size:13px}
  .pc{padding:8px 12px}
  .sec{margin-bottom:12px}
  .stats,.con{left:8px;right:8px;width:auto}
  .stats{min-width:0;top:calc(8px + var(--st));padding:8px}
  .con{bottom:calc(8px + var(--sb))}
  .edge{height:36px}
  .fss{display:none}
  .tch{display:block}
  .loading-container{gap:14px}
  .loading-spinner{width:40px;height:40px}
  .loading-status{font-size:15px}
  .loading-substatus{font-size:11px}
  .auth-container{max-width:260px}
  .auth-icon{width:36px;height:36px;margin-bottom:10px}
  .auth-title{font-size:16px}
}

/* Landscape */
@media(max-height:480px) and (orientation:landscape){
  .loading-overlay{padding:12px 20px}
  .loading-container{gap:10px}
  .loading-spinner{width:32px;height:32px}
  .loading-status{font-size:14px}
  .loading-substatus{font-size:10px}
  .loading-stages{gap:4px}
  .stage{padding:4px 8px}
  .stage-label{font-size:9px}
  .auth-container{display:grid;grid-template-columns:1fr 1fr;max-width:400px;gap:8px 12px}
  .auth-icon{grid-column:1/-1;width:28px;height:28px;margin:0 auto 4px}
  .auth-title{grid-column:1/-1;font-size:14px;margin:0}
  .auth-subtitle{grid-column:1/-1;font-size:10px;margin-bottom:6px}
  .auth-field{margin-bottom:0}
  .auth-input{padding:8px 10px;font-size:13px}
  .auth-input-pin{font-size:14px;letter-spacing:4px}
  .auth-error{grid-column:1/-1;margin:0;min-height:14px}
  .auth-btn{grid-column:1/-1;padding:8px;font-size:12px}
  .pnl{max-height:calc(100vh - 16px);right:8px;top:8px;bottom:8px;transform:translateY(0) translateX(calc(100% + 16px))}
  .pnl.on{transform:translateY(0) translateX(0)}
  .stats{max-height:calc(100vh - 20px)}
  .con{max-height:35vh}
}

@media(max-height:380px) and (orientation:landscape){
  .loading-spinner{width:24px;height:24px}
  .loading-status{font-size:12px}
  .auth-container{max-width:360px}
  .auth-icon{width:24px;height:24px}
  .auth-title{font-size:13px}
  .auth-input{padding:6px 8px;font-size:12px}
  .auth-btn{padding:6px}
}

@media(min-width:641px) and (max-width:1024px){
  .pnl{width:240px}
  .stats{min-width:300px}
  .con{width:340px}
}

@media(min-width:1400px){
  .pnl{width:280px}
  .stats{min-width:380px}
  .con{width:440px}
}

.fss.un{display:none}
@media(prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;transition-duration:.01ms!important}}
